<mvc:View controllerName="com.limscloud.app.controller.jobs.TT02-detail" displayBlock="true" height="100%" 
	xmlns="sap.m" 
	xmlns:core="sap.ui.core" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns:f="sap.f" 
	xmlns:layout="sap.ui.layout">
	<App id="TT02-detail">
		<pages>
			<f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}" showFooter="true">
				<!-- DynamicPage Title -->
				<f:title>
					<f:DynamicPageTitle>
						<f:heading>
							<Title text="Job #: {jobsModel>/perform/header/jobId}"/>
						</f:heading>
						<f:expandedContent>
							<Label text="{jobsModel>/perform/header/jobDesc}"/>
						</f:expandedContent>
						<f:snappedContent>
							<Label text="{jobsModel>/perform/header/jobDesc}"/>
						</f:snappedContent>
						<f:actions>
							<Button icon="sap-icon://message-popup" text="{/messagesLength}" type="Transparent" press="onMessageButtonPress" visible="{= !!${/messagesLength}}"/>
							<Button text="Save" icon="sap-icon://save" type="Transparent" press="_onSavePress" enabled="{ path: 'jobsModel>/perform/header/status', 
																			formatter: '.formatter.formatSButton'}"/>
							<Button text="Submit" icon="sap-icon://accept" type="Accept" press="_onSubmitPress" enabled="{ path: 'jobsModel>/perform/header/status', 
																			formatter: '.formatter.formatSButton'}"/>
						</f:actions>
						<f:navigationActions>
							<Button icon="sap-icon://decline" type="Transparent" press="onNavBack" tooltip="Close"/>
						</f:navigationActions>
					</f:DynamicPageTitle>
				</f:title>
				<!-- DynamicPage Header -->
				<f:header>
					<f:DynamicPageHeader pinnable="false">
						<layout:HorizontalLayout allowWrapping="true">
							<layout:VerticalLayout class="sapUiMediumMarginEnd">
								<ObjectAttribute title="Lab" text="{jobsModel>/perform/header/labName}"/>
								<ObjectAttribute title="Order #" text="{jobsModel>/perform/header/orderId}"/>
							</layout:VerticalLayout>

							<layout:VerticalLayout class="sapUiMediumMarginEnd">
								<ObjectAttribute title="Group" text="{jobsModel>/perform/header/groupDesc}"/>
								<layout:HorizontalLayout allowWrapping="false">
									<ObjectAttribute title="Status"/>
									<ObjectStatus class="sapUiTinyMarginBegin" text="{ path: 'jobsModel>/perform/header/status', 
																			formatter: '.formatter.formatJobStatusText'}" state="{ path: 'jobsModel>/perform/header/status', 
																			formatter: '.formatter.formatJobStatusValueState'}" />
								</layout:HorizontalLayout>
							</layout:VerticalLayout>

							<layout:VerticalLayout class="sapUiMediumMarginEnd">
								<ObjectAttribute title="Created by" text="{jobsModel>/perform/header/createdBy}"/>
								<ObjectAttribute title="Created at" text="{ path: 'jobsModel>/perform/header/createdAt', 
																			formatter: '.formatter.formatDateTime'}"/>


							</layout:VerticalLayout>

							<layout:VerticalLayout class="sapUiMediumMarginEnd">
								<ObjectAttribute title="Approver" text="{jobsModel>/perform/header/appvId}"/>
								<ObjectAttribute title="Approved at" text="{jobsModel>/perform/header/appvAt}"/>
							</layout:VerticalLayout>

						</layout:HorizontalLayout>
					</f:DynamicPageHeader>
				</f:header>
				<f:content>
					<Table id="jobItemsTable" inset="false" items="{jobsModel>/perform/items}" mode="MultiSelect">
						<headerToolbar>
							<OverflowToolbar>
								<content>
									<Title text="Job Items" />
									<ToolbarSpacer />
								</content>
							</OverflowToolbar>
						</headerToolbar>
						<columns>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Item #" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Description" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Parameter" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Method" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="UoM" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Sample #" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Test value" />
							</Column>
							<Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center" width="4em">
								<Text text="Performed by" />
							</Column>
						</columns>
						<items>
							<ColumnListItem>
								<cells>
									<Text text="{jobsModel>itemId}" />
									<Text text="{jobsModel>itemDesc}" />
									<Text text="{jobsModel>ParamDesc}" />
									<Text text="{jobsModel>MethodDesc}" />
									<Text text="{jobsModel>UoM}" />
									<Text text="{jobsModel>sampleId}" />
									<Input value="{jobsModel>test_value}" enabled="{ path: 'jobsModel>XFLAG', formatter: '.formatter.formatXFLAG'}" />

									<ComboBox items="{jobsModel>/lookups/users}" value="{jobsModel>performBy}" selectionChange="_selectPerformBy" placeholder="Select User" showSecondaryValues= "true" filterSecondaryValues="true" enabled="{ path: 'jobsModel>XFLAG', formatter: '.formatter.formatXFLAG'}">
										<core:ListItem key="{jobsModel>userId}" text="{jobsModel>userId}" additionalText="{jobsModel>fullname}" />
									</ComboBox>
								</cells>
							</ColumnListItem>
						</items>
					</Table>
				</f:content>
				<!-- DynamicPage Footer -->
				<f:footer>
					<!-- <OverflowToolbar>
						<Button icon="sap-icon://message-popup" text="{/messagesLength}" type="Emphasized" press="onMessageButtonPress" visible="{= !!${/messagesLength}}"/>
						<ToolbarSpacer/>
						<Button type="Accept" text="Accept"/>
						<Button type="Reject" text="Reject"/>
					</OverflowToolbar> -->
				</f:footer>
			</f:DynamicPage>
		</pages>
	</App>



</mvc:View>